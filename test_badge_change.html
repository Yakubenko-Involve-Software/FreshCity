<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Badge Change - Call before delivery to Call scheduled</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        .badge-transition {
            transition: all 0.3s ease-in-out;
        }
        
        .badge-call-scheduled {
            background-color: #d1fae5 !important;
            color: #047857 !important;
            border: 1px solid #a7f3d0 !important;
        }
        
        .badge-call-scheduled:hover {
            background-color: #a7f3d0 !important;
            transform: translateY(-1px);
            box-shadow: 0 2px 4px rgba(16, 185, 129, 0.2);
        }
    </style>
</head>
<body class="bg-gray-100 p-8">
    <div class="max-w-4xl mx-auto">
        <h1 class="text-3xl font-bold text-gray-800 mb-8">Test Badge Change Functionality</h1>
        
        <!-- Test Timeline Card -->
        <div class="bg-white border border-gray-200 rounded-lg p-6 shadow-sm mb-8">
            <h2 class="text-xl font-semibold text-gray-800 mb-4">Timeline Card with "Call before delivery" Badge</h2>
            
            <div class="timeline-stop-card bg-white border border-gray-200 rounded-lg p-4 mb-3 shadow-sm hover:shadow-md transition-shadow duration-200 relative cursor-pointer">
                <div class="absolute top-3 right-3">
                    <span class="inline-flex items-center text-xs px-2 py-1 rounded-full border bg-red-100 text-red-800 border-red-200 font-medium">
                        High
                    </span>
                </div>
                
                <div class="flex items-start justify-between">
                    <div class="flex-1">
                        <div class="mb-2">
                            <div class="text-lg font-bold text-gray-900">08:25</div>
                            <div class="text-sm text-gray-600">Campo Grande</div>
                        </div>
                        <div class="flex items-center space-x-2 mb-2">
                            <span class="text-sm font-medium text-gray-700">Delivery Stop</span>
                            <span class="inline-flex items-center text-xs px-2 py-1 rounded-full bg-gray-100 text-gray-700 font-medium">Delivery</span>
                        </div>
                        <div class="flex flex-wrap gap-2 items-center text-xs mt-2">
                            <span class="bg-gray-100 px-2 py-1 rounded text-gray-700">Position: 1/8</span>
                        </div>
                        <div class="flex flex-wrap gap-2 items-center text-xs mt-2">
                            <span class="bg-red-100 text-red-700 hover:bg-red-200 px-2 py-1 rounded badge-transition" id="test-badge">Call before delivery</span>
                        </div>
                        
                        <div class="grid grid-cols-2 gap-3 mt-3 text-xs">
                            <div class="bg-gray-50 px-3 py-2 rounded">
                                <div class="text-gray-500 mb-1">Spoilage Risk</div>
                                <div class="font-semibold text-gray-900">5.0%</div>
                            </div>
                            <div class="bg-gray-50 px-3 py-2 rounded">
                                <div class="text-gray-500 mb-1">Distance</div>
                                <div class="font-semibold text-gray-900">1768m</div>
                            </div>
                            <div class="bg-gray-50 px-3 py-2 rounded">
                                <div class="text-gray-500 mb-1">Avg Delivery Time</div>
                                <div class="font-semibold text-gray-900">33min</div>
                            </div>
                            <div class="bg-gray-50 px-3 py-2 rounded">
                                <div class="text-gray-500 mb-1">Avg Efficiency</div>
                                <div class="font-semibold text-gray-900">95%</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Test Popup -->
        <div class="bg-white border border-gray-200 rounded-lg p-6 shadow-sm mb-8">
            <h2 class="text-xl font-semibold text-gray-800 mb-4">Test Popup - Call before delivery warning</h2>
            
            <div class="space-y-4">
                <div class="bg-red-50 p-3 rounded-lg border border-red-200">
                    <div class="text-sm text-red-700 mb-1">Risk Level</div>
                    <div class="text-lg font-bold text-red-800">56% Risk</div>
                </div>
                
                <div class="bg-gray-50 p-3 rounded-lg">
                    <div class="text-sm text-gray-600 mb-1 font-semibold">Risk factors</div>
                    <div class="text-sm text-gray-900">High traffic area, Limited parking availability, Historical delivery failures, Campo Grande specific factors, Route A considerations, Stop 1 specific risks</div>
                </div>
                
                <div class="bg-gray-50 p-3 rounded-lg">
                    <div class="text-sm text-gray-600 mb-1 font-semibold">AI recommendation</div>
                    <div class="text-sm text-gray-900">Call before delivery for Campo Grande on Route A at stop 1</div>
                </div>
                
                <div class="bg-gray-50 p-3 rounded-lg">
                    <div class="text-sm text-gray-600 mb-1 font-semibold">Analysis basis</div>
                    <div class="text-sm text-gray-900">Based on historical delivery data, traffic patterns, customer availability, and location-specific factors.</div>
                </div>
                
                <div class="bg-gray-50 p-3 rounded-lg">
                    <div class="text-sm text-gray-600 mb-1 font-semibold">Apply action</div>
                    <div class="text-sm text-gray-900">Badge Call scheduled, Summary Calls +1 | Location: Campo Grande | Route: A, Stop: 1 | Spoilage: 5%, Distance: 1768m, Time: 33min, Efficiency: 95%</div>
                </div>
                
                <div class="bg-gray-50 p-3 rounded-lg">
                    <div class="text-sm text-gray-600 mb-1 font-semibold">KPI effect</div>
                    <div class="text-sm text-gray-900">KPI does not change | Campo Grande KPI | Route A metrics | Stop 1 performance</div>
                </div>
            </div>
            
            <div class="flex gap-3 mt-6">
                <button onclick="testCancel()" class="flex-1 bg-gray-200 text-gray-700 py-2 px-4 rounded-lg hover:bg-gray-300 transition-colors">
                    Cancel
                </button>
                <button onclick="testApply()" class="flex-1 bg-blue-600 text-white py-2 px-4 rounded-lg hover:bg-blue-700 transition-colors">
                    Apply
                </button>
            </div>
        </div>
        
        <!-- Test Results -->
        <div class="bg-white border border-gray-200 rounded-lg p-6 shadow-sm">
            <h2 class="text-xl font-semibold text-gray-800 mb-4">Test Results</h2>
            <div id="test-results" class="text-sm text-gray-600">
                Click "Apply" button to test the badge change functionality...
            </div>
        </div>
    </div>
    
    <script>
        function testApply() {
            const testBadge = document.getElementById('test-badge');
            const testResults = document.getElementById('test-results');
            
            if (testBadge && testBadge.textContent === 'Call before delivery') {
                // Add transition class for smooth animation
                testBadge.classList.add('badge-transition');
                
                // Change the badge appearance
                testBadge.className = 'bg-green-100 text-green-700 hover:bg-green-200 px-2 py-1 rounded badge-transition badge-call-scheduled';
                testBadge.textContent = 'Call scheduled';
                
                // Add a subtle animation effect
                testBadge.style.transform = 'scale(1.1)';
                setTimeout(() => {
                    testBadge.style.transform = 'scale(1)';
                }, 200);
                
                testResults.innerHTML = `
                    <div class="text-green-600 font-medium">✅ SUCCESS!</div>
                    <div class="mt-2">Badge changed from "Call before delivery" to "Call scheduled"</div>
                    <div class="mt-1">Color changed from red to green</div>
                    <div class="mt-1">Animation applied successfully</div>
                `;
                
                console.log('✅ Test badge change successful');
            } else {
                testResults.innerHTML = `
                    <div class="text-red-600 font-medium">❌ FAILED!</div>
                    <div class="mt-2">Badge not found or already changed</div>
                `;
                
                console.log('❌ Test badge change failed');
            }
        }
        
        function testCancel() {
            const testResults = document.getElementById('test-results');
            testResults.innerHTML = `
                <div class="text-gray-600 font-medium">ℹ️ Cancelled</div>
                <div class="mt-2">No changes applied</div>
            `;
        }
    </script>
</body>
</html>
